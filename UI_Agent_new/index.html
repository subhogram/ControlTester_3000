<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ControlTester 3000 - Agentic AI Platform</title>
    <link rel="stylesheet" href="styles.css">
    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/highlight.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- COLLAPSIBLE SIDEBAR -->
        <div class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebarToggle" title="Toggle sidebar">‚â°</button>
            
            <div class="sidebar-header">
                <div class="sidebar-title">ControlTester 3000</div>
                <div class="sidebar-subtitle">Agentic AI Platform</div>
            </div>
            
            <div class="agents-section">
                <div class="section-title">Agents</div>
                
                <div class="agent-item active" data-agent="chat">
                    <div class="agent-icon">üí¨</div>
                    <div class="agent-info">
                        <div class="agent-name">Chat Agent</div>
                        <div class="agent-status">Always Available</div>
                    </div>
                    <div class="status-indicator status-online"></div>
                </div>
                
                <div class="agent-item" data-agent="knowledge">
                    <div class="agent-icon">üéì</div>
                    <div class="agent-info">
                        <div class="agent-name">Knowledge Training</div>
                        <div class="agent-status">Ready</div>
                    </div>
                    <div class="status-indicator status-ready"></div>
                </div>
                
                <div class="agent-item" data-agent="policy">
                    <div class="agent-icon">üè¢</div>
                    <div class="agent-info">
                        <div class="agent-name">Policy Training</div>
                        <div class="agent-status">Ready</div>
                    </div>
                    <div class="status-indicator status-ready"></div>
                </div>
                
                <div class="agent-item" data-agent="evidence">
                    <div class="agent-icon">‚öñÔ∏è</div>
                    <div class="agent-info">
                        <div class="agent-name">Evidence Analysis</div>
                        <div class="agent-status">Idle</div>
                    </div>
                    <div class="status-indicator status-idle"></div>
                </div>
            </div>
            
            <div class="recent-runs">
                <div class="section-title">Recent Runs</div>
                
                <div class="run-item">
                    <div class="run-title">üéì Knowledge Base #15</div>
                    <div class="run-time">1 hour ago</div>
                </div>
                
                <div class="run-item">
                    <div class="run-title">üè¢ Policy Training #12</div>
                    <div class="run-time">2 hours ago</div>
                </div>
                
                <div class="run-item">
                    <div class="run-title">‚öñÔ∏è Audit Analysis #8</div>
                    <div class="run-time">Yesterday</div>
                </div>
                
                <div class="run-item">
                    <div class="run-title">üîç Log Evidence #3</div>
                    <div class="run-time">2 days ago</div>
                </div>
            </div>
        </div>
        
        <!-- MAIN CHAT AREA -->
        <div class="main-content">
            <div class="chat-header">
                <div class="chat-title">Chat Agent</div>
                
                <!-- MODEL SELECTOR DROPDOWN -->
                <div class="model-selector">
                    <button class="model-dropdown-btn" id="modelDropdownBtn">
                        <div class="model-info">
                            <span class="model-icon">ü§ñ</span>
                            <span class="model-name" id="selectedModelName">Select Model</span>
                        </div>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    
                    <div class="model-dropdown" id="modelDropdown">
                        <div class="dropdown-header">Available Models</div>
                        
                        <button class="model-option" data-model="llama3.2:latest" data-icon="ü§ñ" data-size="3B">
                            <span class="model-option-icon">ü§ñ</span>
                            <div class="model-option-info">
                                <div class="model-option-name">llama3.2:latest</div>
                                <div class="model-status">Fast ‚Ä¢ General purpose</div>
                            </div>
                            <span class="model-size">3B</span>
                        </button>
                        
                        <button class="model-option" data-model="llama3.1:8b" data-icon="üß†" data-size="8B">
                            <span class="model-option-icon">üß†</span>
                            <div class="model-option-info">
                                <div class="model-option-name">llama3.1:8b</div>
                                <div class="model-status">Balanced ‚Ä¢ Code & reasoning</div>
                            </div>
                            <span class="model-size">8B</span>
                        </button>
                        
                        <button class="model-option" data-model="llama3.1:70b" data-icon="üéØ" data-size="70B">
                            <span class="model-option-icon">üéØ</span>
                            <div class="model-option-info">
                                <div class="model-option-name">llama3.1:70b</div>
                                <div class="model-status">Powerful ‚Ä¢ Complex analysis</div>
                            </div>
                            <span class="model-size">70B</span>
                        </button>
                        
                        <button class="model-option" data-model="mistral:7b" data-icon="‚ö°" data-size="7B">
                            <span class="model-option-icon">‚ö°</span>
                            <div class="model-option-info">
                                <div class="model-option-name">mistral:7b</div>
                                <div class="model-status">Efficient ‚Ä¢ Multi-language</div>
                            </div>
                            <span class="model-size">7B</span>
                        </button>
                        
                        <button class="model-option" data-model="codellama:13b" data-icon="üíª" data-size="13B">
                            <span class="model-option-icon">üíª</span>
                            <div class="model-option-info">
                                <div class="model-option-name">codellama:13b</div>
                                <div class="model-status">Specialized ‚Ä¢ Code generation</div>
                            </div>
                            <span class="model-size">13B</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome Message -->
                <div class="message welcome-message">
                    <div class="message-avatar avatar-assistant">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-text">
                            Welcome to ControlTester 3000! I can help you with three main workflows:
                            <br><br>
                            <strong>üìö Knowledge Base Training:</strong> Upload general documents to build a comprehensive knowledge base
                            <br>
                            <strong>üè¢ Company Policy Training:</strong> Upload company-specific policies for specialized training
                            <br>
                            <strong>‚öñÔ∏è Evidence Analysis:</strong> Upload password logs, database logs, or other evidence for audit workbook generation
                            <br><br>
                            What would you like to start with? You can also toggle the sidebar using the ‚â° button for more space.
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
            </div>
            
            <!-- ENHANCED CHAT INPUT -->
            <div class="chat-input-container">
                <div class="quick-actions">
                    <div class="quick-action" data-command="/knowledge">üìö /knowledge</div>
                    <div class="quick-action" data-command="/policy">üè¢ /policy</div>
                    <div class="quick-action" data-command="/evidence">‚öñÔ∏è /evidence</div>
                    <div class="quick-action" data-command="/audit">üìä /audit</div>
                    <div class="quick-action" data-command="/help">‚ùì /help</div>
                </div>
                
                <div class="chat-input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="chatInput"
                        placeholder="Type your message... (Use /knowledge, /policy, /evidence for specific workflows)"
                        rows="2"
                    ></textarea>
                    
                    <div class="input-actions">
                        <button class="action-btn" id="attachBtn" title="Attach file">üìé</button>
                        <button class="action-btn" id="voiceBtn" title="Voice input">üé§</button>
                        <button class="action-btn send-btn" id="sendBtn" title="Send message">‚û§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal overlay for dropdown -->
    <div class="modal-overlay" id="modalOverlay"></div>
    
    <!-- Hidden file input -->
    <input type="file" id="fileInput" multiple accept=".pdf,.docx,.txt,.xlsx,.log,.csv,.json,.xml,.md" style="display: none;">
    
    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="ui-manager.js"></script>
    <script src="workflow-manager.js"></script>
    <script src="app.js"></script>
</body>
</html>